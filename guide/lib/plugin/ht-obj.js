!function(N,L,M){"use strict";var h="ht",K=N[h],D=null,f=Math,q=f.abs,d=f.max,Q=Number.MAX_VALUE,c=K.Default,P=c.getInternal(),$=c.clone,b=P.vec3TransformMat4,F=P.appendArray,X=function(){var N=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,R=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,s=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,L=function(q,Q){return Q=parseInt(Q),Q>=0?q[Q-1]:q[Q+q.length]},x=function(D,O,T,j,u,I){if(D.vs){var g=L(O,j),a=L(O,u),Y=L(O,I),A=T.matrix,Q=D.vs;if(T.flipFace){var f=a;a=Y,Y=f}A?(F(Q,b($(g),A)),F(Q,b($(a),A)),F(Q,b($(Y),A))):(F(Q,g),F(Q,a),F(Q,Y))}},i=function(D,t,A,z,n,_){if(D.vs){var u=L(t,z),$=L(t,n),S=L(t,_),p=A.flipY;if(A.flipFace){var X=$;$=S,S=X}D.uv.push(u[0],p?1-u[1]:u[1],$[0],p?1-$[1]:$[1],S[0],p?1-S[1]:S[1])}},j=function(q,y,p,u,j,G){if(q.vs){var v=L(y,u),U=L(y,j),k=L(y,G),f=p.normalMatrix,N=q.ns;if(p.flipFace){var _=U;U=k,k=_}f?(F(N,b($(v),f)),F(N,b($(U),f)),F(N,b($(k),f))):(F(N,v),F(N,U),F(N,k))}},J=function(m,L,F,k,R,A,n,s){var u=k&&k.length&&s;A[3]===M?(x(m,L,R,A[0],A[1],A[2]),n&&i(m,F,R,n[0],n[1],n[2]),u&&j(m,k,R,s[0],s[1],s[2])):(x(m,L,R,A[0],A[1],A[3]),x(m,L,R,A[1],A[2],A[3]),n&&(i(m,F,R,n[0],n[1],n[3]),i(m,F,R,n[1],n[2],n[3])),u&&(j(m,k,R,s[0],s[1],s[3]),j(m,k,R,s[1],s[2],s[3])))},p=function(i,f,k,K){var V,F,n,g,c,v,S,J=Q,$=Q,x=Q,_=-Q,b=-Q,C=-Q;for(V in i)for(v=i[V].vs,S=v.length,F=0;S>F;F+=3)n=v[F+0],g=v[F+1],c=v[F+2],J>n&&(J=n),$>g&&($=g),x>c&&(x=c),n>_&&(_=n),g>b&&(b=g),c>C&&(C=c);if(k){var o=J+(_-J)/2,L=$+(b-$)/2,D=x+(C-x)/2;for(V in i)for(v=i[V].vs,S=v.length,F=0;S>F;F+=3)v[F+0]-=o,v[F+1]-=L,v[F+2]-=D}var j,O,p;k?(j=_-J,O=b-$,p=C-x):(j=2*d(q(J),q(_)),O=2*d(q($),q(b)),p=2*d(q(x),q(C))),0===j&&(j=Math.min(O,p)/1e3||.001),0===O&&(O=Math.min(j,p)/1e3||.001),0===p&&(p=Math.min(j,O)/1e3||.001),K.rawS3=[j,O,p];for(V in i){if(v=i[V].vs,f)for(S=v.length,F=0;S>F;F+=3)j&&(v[F+0]/=j),O&&(v[F+1]/=O),p&&(v[F+2]/=p);i[V].rawS3=K.rawS3}};return function(G,W,o){if(!G)return D;(P.isString(W)||W instanceof ArrayBuffer)&&(W=l(W)),o||(o={}),o.flipY==D&&(o.flipY=!0),(o.s3||o.r3||o.t3||o.mat)&&(o.matrix=P.createWorldMatrix(o.mat,o.s3,o.r3,o.rotationMode,o.t3));var x,B,A,I,d,Q,K=[],i=[],f=o.ignoreNormal?D:[],q=o.reverseFlipMtls,k={vs:[],uv:[],ns:f?[]:D},j={htdefault:k},g=new u(G);for(f&&o.matrix&&(o.normalMatrix=P.createNormalMatrix(o.matrix));null!=(B=g.stepNext());)if(B=B.trim(),0!==B.length&&"#"!==B.charAt(0))if(B.indexOf("#QNAN0")>=0&&(B=B.replace(/#QNAN0/gi,"0")),A=N.exec(B))K.push([parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3])]);else if(A=R.exec(B))i.push([parseFloat(A[1]),parseFloat(A[2])]);else if(f&&(A=s.exec(B)))o.flipFace?f.push([parseFloat(-A[1]),parseFloat(-A[2]),parseFloat(-A[3])]):f.push([parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3])]);else if("f"===B[0]){var Z=B.split(/\s+/);if(Z.length<4)continue;var v,x,h,H=[],Y=[],T=[];for(x=1,h=Z.length;h>x;x++)v=Z[x].split("/"),H.push(parseInt(v[0],10)),v.length>1&&v[1].length>0&&T.push(parseInt(v[1],10)),v.length>2&&v[2].length>0&&Y.push(parseInt(v[2],10));for(x=0,h=H.length-2;h>x;x++)J(k,K,i,f,o,[H[0],H[x+1],H[x+2]],T.length?[T[0],T[x+1],T[x+2]]:D,Y.length?[Y[0],Y[x+1],Y[x+2]]:D)}else if(/^usemtl /.test(B)&&(I=B.substring(7).trim(),!(k=j[I]))){if(k={name:I,vs:[],uv:[],ns:f?[]:D},o.ignoreMtls&&o.ignoreMtls.indexOf(I)>=0&&delete k.vs,(o.reverseFlip||"*"===q||q&&q.indexOf(I)>=0)&&(k.reverseFlip=!0),W&&(d=W[I],d&&(o.ignoreColor||(k.color=d.kd),!o.ignoreTransparent&&d.d>0&&d.d<1&&(k.transparent=!0,k.opacity=d.d),!o.ignoreImage&&(Q=d.map_kd)))){Q=Q.split(" ");var m=-1;for(x=0;x<Q.length;x++)"-o"===Q[x]?(k.uvOffset=[parseFloat(Q[x+1]),parseFloat(Q[x+2])],x+=3,m=x):"-s"===Q[x]&&(k.uvScale=[parseFloat(Q[x+1]),parseFloat(Q[x+2])],x+=3,m=x);k.image=(o.prefix||"")+Q.splice(m+1).join(" ")}j[I]=k}var t=[];for(var a in j){var y=j[a].vs;y&&0!==y.length||t.push(a)}t.forEach(function(s){delete j[s]}),p(j,o.cube,o.center,o);var C=o.shape3d;if(C){var E=[];for(var I in j){var k=j[I];E.rawS3=k.rawS3,E.push(k)}c.setShape3dModel(C,E)}return j}}(),l=function(Y){var T={};if(Y)for(var H,n,I,d,x,s,q=new u(Y),X=/\s+/;null!=(n=q.stepNext());)n=n.trim(),0!==n.length&&"#"!==n.charAt(0)&&(I=n.indexOf(" "),d=(I?n.substring(0,I):n).toLowerCase(),x=(I?n.substring(I+1):"").trim(),"newmtl"===d?T[x]=H={name:x}:H&&("ka"===d||"kd"===d||"ks"===d?(s=x.split(X,3),H[d]=[parseFloat(s[0]),parseFloat(s[1]),parseFloat(s[2]),1]):H[d]="ns"===d||"d"===d?parseFloat(x):x));return T},u=function(e){var w=this;if(e instanceof ArrayBuffer){w.isBuffer=!0;var n=0,G=new Uint8Array(e),N=G.length,E=G.length;w.stepNext=function(){for(var J,O,x=n;N>n;)if(J=G[n],O=J>>4,12===O||13==O)n+=2;else if(14===O)n+=3;else if(n++,10===J)return String.fromCharCode.apply(null,G.subarray(x,n));return n>x?String.fromCharCode.apply(null,G.subarray(x,n)):null}}else{w.isBuffer=!1;var I=e.split("\n"),p=0,E=I.length;w.stepNext=function(){return E>p?I[p++]:null}}};u.prototype={},u.prototype.constructor=u,P.addMethod(c,{loadObj:function(C,S,z){z=z||{};var b=!1;/(MSIE |Trident\/|Edge\/)/.test(N.navigator.userAgent)&&(b=!0);var O=function(u){var G,J=z.finishFunc,f=z.shape3d,L=u?X(u[0],u[1],z):null;if(L){if(f)G=c.getShape3dModel(f);else{G=[];for(var y in L){var q=L[y];G.rawS3=q.rawS3,G.push(q)}}J&&J(L,G,G.rawS3)}else J&&J(null)};if(b){var d=function(u){z.responseType="arraybuffer",c.xhrLoad(C,function(G){O([G,u])},z)};S?c.xhrLoad(S,function(T){d(T)},z):d()}else c.xhrLoad(S?[C,S]:[C],O,z)},parseObj:function(R,v,i){return X(R,v,i)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);